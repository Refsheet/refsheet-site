.lightbox-wrapper.v2
  $width-break-lg: 900px

  position: fixed
  top: 0
  right: 0
  left: 0
  bottom: 0
  background-color: rgba(0, 0, 0, 0.5)
  z-index: $z-lightbox
  text-align: center
  display: table-cell
  vertical-align: middle

  @at-root
    body.lightbox-open
      overflow: hidden

  .lightbox.v2
    @extend .z-depth-2
    margin: 1.5rem 4rem
    display: inline-flex
    text-align: left
    background-color: $card-bg-color
    border-radius: 2px
    min-height: 300px
    max-height: calc(100vh - 3rem)

    .mobile-header
      display: none

    .close
      position: absolute
      top: 0
      right: 0
      padding: 1rem
      z-index: 2
      opacity: 0.8
      color: white
      transition: opacity 0.3s ease

      &:hover
        opacity: 1.0
        background-color: $input-background

    .lightbox-content
      display: inline-flex

    .favorites
      border-bottom: none
      background-color: rgba(white, 0.03)

      i.material-icons
        line-height: 2rem
        margin: 0.5rem 0rem 0.5rem 0.5rem
        color: $text-light-color

        &.isFavorite
          color: gold !important

      .avatar
        height: 2rem
        line-height: 2rem
        margin: 0.5rem -1.5rem 0.5rem 0.5rem
        vertical-align: middle
        border: 1px solid $card-bg-color

      .fav-summary
        line-height: 2rem
        margin: 0.5rem 0.5rem 0.5rem 2rem
        vertical-align: middle
        float: right

    .comments
      .avatar
        height: 2.5rem !important
        width: 2.5rem !important
        left: 0.5rem !important
        top: 0.5rem !important

      .card-content
        margin-left: 3.5rem !important
        padding: 0.5rem !important

      .card
        border-bottom: none

      .comment-form
        .card, .card-content
          box-shadow: none
          margin: 0

        form
          display: flex
          margin: 0
          background-color: rgba(black, 0.1)
          height: auto

          .avatar
            height: 2rem !important
            width: 2rem !important
            margin: 0.5rem
            flex: 0 0 2rem
            position: static

          & > .card.reply-box
            display: flex
            flex-grow: 1

          .card-content.reply-box
            display: flex
            flex-grow: 1
            margin: 0 !important
            padding: 0 !important

            .input-field
              flex-grow: 1
              flex-shrink: 1

              input, textarea
                height: auto
                min-height: 3rem
                line-height: 3rem
                vertical-align: middle
                box-sizing: border-box

            .send
              flex: 0 0 3rem

              button
                padding: 0 !important
                height: 100%
                width: 3rem
                text-align: center
                line-height: 3rem
                vertical-align: middle

          button
            vertical-align: middle
            line-height: 2.5rem
            padding: 0.25rem
            border-radius: 0
            width: 2.5rem
            transition: background-color 0.3s ease
            color: white
            background-color: rgba(black, 0.1)
            flex: 0 0 2.5rem

          input, textarea
            display: block
            flex: 1 1 auto
            margin: 0 !important
            height: auto
            line-height: 2.5rem
            vertical-align: middle
            padding: 0.25rem 0.5rem !important
            background-color: transparent
            border: none !important
            outline: none !important

    .image-content
      overflow: visible
      min-width: 600px
      text-align: center

      .nsfw-cover
        margin: 0 auto
        cursor: pointer
        padding: 1rem

        i.material-icons
          font-size: 3rem
          color: rgba(255, 255, 255, 0.5)

        .caption
          margin-top: 1rem

      .image-tags
        margin: 0
        position: absolute
        top: 0
        left: 0
        right: 0
        bottom: 0
        pointer-events: none

        .tag
          position: absolute

          &:hover
            z-index: 1

          a
            position: relative
            display: block
            color: white
            font-size: 0.8rem
            text-transform: uppercase
            pointer-events: initial
            background-color: rgba(0,0,0,0.8)
            height: 2rem
            line-height: 2rem
            vertical-align: middle
            padding: 0 1rem
            opacity: 0.5
            transition: opacity 0.3s ease

            &:hover
              opacity: 1.0

            img
              width: 2rem
              height: 2rem
              position: absolute
              top: 0

            &:before
              content: ''
              display: block
              position: absolute
              border: 3px solid white
              top: 0
              border-radius: 1px
              border-bottom-color: transparent

          &.bottom a:before
            border-bottom-color: white
            border-top-color: transparent
            top: auto
            bottom: 0

          &.right a
            border-radius: 1rem 1px 1rem 1rem
            padding-left: 2.5rem

            &:before
              right: 0
              border-left-color: transparent

            img
              left: 0

          &.right.bottom a
            border-radius: 1rem 1rem 1px 1rem

          &.left a
            border-radius: 1px 1rem 1rem 1rem
            padding-right: 2.5rem

            &:before
              left: 0
              border-right-color: transparent

            img
              right: 0

          &.left.bottom a
            border-radius: 1rem 1rem 1rem 1px

      .imageloader
        width: 100%

      img
        display: block

      .image-status
        max-width: 300px
        margin: 0 auto
        text-align: center

        i.material-icons
          font-size: 3rem

      &:hover .image-nav
        opacity: 0.6

      &:hover .lightbox-overlay
        opacity: 1.0

      &.tagging:hover
        .image-nav, .lightbox-overlay
          opacity: 0
          pointer-events: none

      .lightbox-overlay
        position: absolute
        left: 0
        right: 0
        background-color: rgba(0,0,0,0.6)
        color: white
        text-align: left
        padding: 0.5rem 1rem
        opacity: 0.0
        transition: opacity 0.3s ease

        &.top
          top: 0
          background: linear-gradient(to bottom, rgba(0,0,0,0.9), transparent)

        &.bottom
          bottom: 0
          background: linear-gradient(to top, rgba(0,0,0,0.9), transparent)

        h1
          font-size: 2rem

        a.block
          margin: -0.5rem -1rem
          padding: 0.5rem 1rem
          border-radius: 1px
          background-color: transparent
          transition: background-color 0.3s ease

          &:hover
            background-color: rgba(0,0,0,0.6)

      .image-nav
        position: absolute
        padding: 1.5rem
        background-color: rgba(0,0,0,0.6)
        color: white
        opacity: 0
        height: 6rem
        width: 6rem
        margin: 0 1rem
        border-radius: 2px
        transition: opacity 0.3s ease

        i.material-icons
          vertical-align: middle
          position: relative
          top: 50%
          transform: translateY(-50%)
          font-size: 3rem

        &:hover
          opacity: 1.0

        &.image-prev
          left: 0

        &.image-next
          right: 0

      @media #{$medium-and-up}
        img
          max-width: calc(100vw - 8rem - 300px)
          max-height: calc(100vh - 3rem)

    .image-details-container
      flex-shrink: 0
      flex-grow: 0
      width: 300px
      word-wrap: break-word

      .react-markdown--slate-editor
        height: auto
        margin: 0 -1rem
        background-color: $input-background

      .markdown-caption
        @extend .muted
        background-color: $input-background
        padding: 0.3rem 1rem
        margin: 0 -1rem

      .image-details
        h3
          font-size: 1.3rem
          margin: 0

      .image-meta
        .image-caption
          min-height: 2.5rem

        .caption
          font-size: inherit !important

        ul.attributes
          margin-bottom: 0

          li
            clear: both
            line-height: 24px
            vertical-align: middle
            padding-left: 2rem
            position: relative
            font-size: 0.9rem
            margin-top: 0.25rem

            .media-tag
              white-space: nowrap

            i.material-icons
              font-size: 1.2rem
              line-height: 24px
              vertical-align: middle
              position: absolute
              left: 0
              top: 0

            a
              display: inline-block
              height: 24px
              font-size: 0.9rem
